{
	"info": {
		"name": "Zooys PDF Operations",
		"description": "Complete collection of PDF operations including merge, split, compress, watermark, and more.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{bearer_token}}",
				"type": "string"
			}
		]
	},
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8000/api"
		},
		{
			"key": "bearer_token",
			"value": "YOUR_TOKEN_HERE"
		},
		{
			"key": "file_id",
			"value": "204"
		},
		{
			"key": "job_id",
			"value": ""
		}
	],
	"item": [
		{
			"name": "1. File Upload",
			"item": [
				{
					"name": "Upload Single File",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"File uploaded successfully\", function () {",
									"    pm.response.to.have.status(201);",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.file_upload.id).to.exist;",
									"});",
									"",
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set(\"file_id\", jsonData.file_upload.id);",
									"    console.log(\"‚úÖ File ID saved: \" + jsonData.file_upload.id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": []
								}
							]
						},
						"url": "{{base_url}}/files/upload"
					},
					"response": []
				}
			]
		},
		{
			"name": "2. PDF Merge",
			"item": [
				{
					"name": "Submit Merge Job",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Job submitted successfully\", function () {",
									"    pm.response.to.have.status(202);",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.job_id).to.exist;",
									"});",
									"",
									"if (pm.response.code === 202) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set(\"job_id\", jsonData.job_id);",
									"    console.log(\"‚úÖ Job ID saved: \" + jsonData.job_id);",
									"    console.log(\"‚è≥ Status: \" + jsonData.status);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"file_ids\": [\"{{file_id}}\", \"205\", \"206\"],\n  \"params\": {\n    \"page_order\": \"as_uploaded\",\n    \"remove_blank_pages\": false,\n    \"add_page_numbers\": false\n  }\n}"
						},
						"url": "{{base_url}}/pdf/edit/merge"
					},
					"response": []
				},
				{
					"name": "Check Merge Status",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"",
									"pm.test(\"Status check successful\", function () {",
									"    pm.response.to.have.status(200);",
									"    pm.expect(jsonData.status).to.exist;",
									"});",
									"",
									"console.log(\"üìä Status: \" + jsonData.status + \" (\" + jsonData.progress + \"%)\");",
									"",
									"if (jsonData.status === \"processing\" || jsonData.status === \"queued\") {",
									"    console.log(\"‚è≥ Still processing... Will auto-retry in 2 seconds\");",
									"    setTimeout(function() {}, 2000);",
									"    postman.setNextRequest(\"Check Merge Status\");",
									"} else if (jsonData.status === \"completed\") {",
									"    console.log(\"‚úÖ Job completed!\");",
									"} else if (jsonData.status === \"failed\") {",
									"    console.log(\"‚ùå Job failed: \" + jsonData.error);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": "{{base_url}}/pdf/edit/merge/status?job_id={{job_id}}"
					},
					"response": []
				},
				{
					"name": "Get Merge Result",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Result retrieved successfully\", function () {",
									"    pm.response.to.have.status(200);",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"if (jsonData.result && jsonData.result.download_urls) {",
									"    console.log(\"‚úÖ Files ready for download:\");",
									"    jsonData.result.download_urls.forEach(function(url, index) {",
									"        console.log((index + 1) + \". \" + url);",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": "{{base_url}}/pdf/edit/merge/result?job_id={{job_id}}"
					},
					"response": []
				}
			]
		},
		{
			"name": "3. PDF Split",
			"item": [
				{
					"name": "Submit Split Job",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 202) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set(\"job_id\", jsonData.job_id);",
									"    console.log(\"‚úÖ Job ID saved: \" + jsonData.job_id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"file_id\": \"{{file_id}}\",\n  \"params\": {\n    \"split_points\": \"2,4\",\n    \"title_prefix\": \"Section\",\n    \"author\": \"Your Name\"\n  }\n}"
						},
						"url": "{{base_url}}/pdf/edit/split"
					},
					"response": []
				},
				{
					"name": "Check Split Status",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"console.log(\"üìä Status: \" + jsonData.status + \" (\" + jsonData.progress + \"%)\");",
									"if (jsonData.status === \"processing\" || jsonData.status === \"queued\") {",
									"    setTimeout(function() {}, 2000);",
									"    postman.setNextRequest(\"Check Split Status\");",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": "{{base_url}}/pdf/edit/split/status?job_id={{job_id}}"
					},
					"response": []
				},
				{
					"name": "Get Split Result",
					"request": {
						"method": "GET",
						"header": [],
						"url": "{{base_url}}/pdf/edit/split/result?job_id={{job_id}}"
					},
					"response": []
				}
			]
		},
		{
			"name": "4. PDF Compress",
			"item": [
				{
					"name": "Submit Compress Job",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 202) {",
									"    pm.collectionVariables.set(\"job_id\", pm.response.json().job_id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"file_id\": \"{{file_id}}\",\n  \"params\": {\n    \"compression_level\": \"medium\",\n    \"quality\": 75\n  }\n}"
						},
						"url": "{{base_url}}/pdf/edit/compress"
					},
					"response": []
				},
				{
					"name": "Check Compress Status",
					"request": {
						"method": "GET",
						"header": [],
						"url": "{{base_url}}/pdf/edit/compress/status?job_id={{job_id}}"
					},
					"response": []
				},
				{
					"name": "Get Compress Result",
					"request": {
						"method": "GET",
						"header": [],
						"url": "{{base_url}}/pdf/edit/compress/result?job_id={{job_id}}"
					},
					"response": []
				}
			]
		},
		{
			"name": "5. PDF Watermark",
			"item": [
				{
					"name": "Submit Watermark Job",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 202) {",
									"    pm.collectionVariables.set(\"job_id\", pm.response.json().job_id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"file_id\": \"{{file_id}}\",\n  \"params\": {\n    \"watermark_type\": \"text\",\n    \"watermark_content\": \"CONFIDENTIAL\",\n    \"position_x\": 50,\n    \"position_y\": 50,\n    \"rotation\": -45,\n    \"opacity\": 0.3,\n    \"color\": \"#FF0000\",\n    \"font_family\": \"Arial\",\n    \"font_size\": 48,\n    \"apply_to_all\": true\n  }\n}"
						},
						"url": "{{base_url}}/pdf/edit/watermark"
					},
					"response": []
				},
				{
					"name": "Check Watermark Status",
					"request": {
						"method": "GET",
						"header": [],
						"url": "{{base_url}}/pdf/edit/watermark/status?job_id={{job_id}}"
					},
					"response": []
				},
				{
					"name": "Get Watermark Result",
					"request": {
						"method": "GET",
						"header": [],
						"url": "{{base_url}}/pdf/edit/watermark/result?job_id={{job_id}}"
					},
					"response": []
				}
			]
		},
		{
			"name": "6. PDF Page Numbers",
			"item": [
				{
					"name": "Submit Page Numbers Job",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 202) {",
									"    pm.collectionVariables.set(\"job_id\", pm.response.json().job_id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"file_id\": \"{{file_id}}\",\n  \"params\": {\n    \"position\": \"bottom_right\",\n    \"format_type\": \"arabic\",\n    \"font_size\": 12,\n    \"page_ranges\": []\n  }\n}"
						},
						"url": "{{base_url}}/pdf/edit/page_numbers"
					},
					"response": []
				},
				{
					"name": "Check Page Numbers Status",
					"request": {
						"method": "GET",
						"header": [],
						"url": "{{base_url}}/pdf/edit/page_numbers/status?job_id={{job_id}}"
					},
					"response": []
				},
				{
					"name": "Get Page Numbers Result",
					"request": {
						"method": "GET",
						"header": [],
						"url": "{{base_url}}/pdf/edit/page_numbers/result?job_id={{job_id}}"
					},
					"response": []
				}
			]
		},
		{
			"name": "7. PDF Protect",
			"item": [
				{
					"name": "Submit Protect Job",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 202) {",
									"    pm.collectionVariables.set(\"job_id\", pm.response.json().job_id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"file_id\": \"{{file_id}}\",\n  \"params\": {\n    \"password\": \"SecurePassword123\",\n    \"permissions\": [\"print\", \"copy\"]\n  }\n}"
						},
						"url": "{{base_url}}/pdf/edit/protect"
					},
					"response": []
				},
				{
					"name": "Check Protect Status",
					"request": {
						"method": "GET",
						"header": [],
						"url": "{{base_url}}/pdf/edit/protect/status?job_id={{job_id}}"
					},
					"response": []
				},
				{
					"name": "Get Protect Result",
					"request": {
						"method": "GET",
						"header": [],
						"url": "{{base_url}}/pdf/edit/protect/result?job_id={{job_id}}"
					},
					"response": []
				}
			]
		},
		{
			"name": "8. Document Conversion",
			"item": [
				{
					"name": "Submit Convert Job",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 202) {",
									"    pm.collectionVariables.set(\"job_id\", pm.response.json().job_id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"file_id\": \"{{file_id}}\",\n  \"target_format\": \"docx\"\n}"
						},
						"url": "{{base_url}}/file-processing/convert"
					},
					"response": []
				},
				{
					"name": "Check Convert Status",
					"request": {
						"method": "GET",
						"header": [],
						"url": "{{base_url}}/jobs/status?job_id={{job_id}}&operation=document_conversion"
					},
					"response": []
				},
				{
					"name": "Get Convert Result",
					"request": {
						"method": "GET",
						"header": [],
						"url": "{{base_url}}/jobs/result?job_id={{job_id}}&operation=document_conversion"
					},
					"response": []
				}
			]
		}
	]
}
